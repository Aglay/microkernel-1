#include <userspace.h>

void setupScreen() {
	char buff[3000];
	char *ptr = buff;

	ptr += sprintf( ptr, "\033[2J\033[;H" );
	ptr += sprintf( ptr,
		"################################################################################\n"
		"## Train Control #   Track A    ## ____12__11_____________________________    ##\n"
		"##################################     /   /                              \\   ##\n"
		"## Uptime        mm:ss          ## ___4  14__________13______10___________ \\  ##\n"
		"## CPU Load      dd             ##   /   /            \\      /            \\ | ##\n"
		"## Active Tasks  dd             ## _/   /              9C | 9B             \\| ##\n"
		"##################################     |                 \\|/                9 ##\n"
		"##       Recent Sensors         ##     |                  |                 | ##\n"
		"## A12 A12 A12 A12 A12 A12 A12  ##     |                 /|\\                8 ##\n"
		"## A12 A12 A12 A12 A12 A12 A12  ## __   \\              99 | 9A             /| ##\n"
		"##################################   \\   \\             /     \\            / | ##\n"
		"##       Switch Positions       ## ___1   15__________16______17_________/ /  ##\n"
		"##  1:C 4:C 7:C 10:C 13:C 16:C  ##     \\   \\                              /   ##\n"
		"##  2:C 5:C 8:C 11:C 14:C 17:C  ## _____2   \\_______6___________7________/    ##\n"
		"##  3:C 6:C 9:C 12:C 15:C 18:C  ##       \\           \\         /              ##\n"
		"##  153:C  154:C  155:C  156:C  ## _______3__________18_______5______________ ##\n"
		"################################################################################\n"
		"##                                                                            ##\n"
		"##                                                                            ##\n"
		"##                                                                            ##\n"
		"##                                                                            ##\n"
		"##                                                                            ##\n"
		"## ~>                                                                         ##\n"
		"################################################################################\n");
	ptr += sprintf( ptr, "\033[%d;7H\0", UI_CLI_CMD_LINE_ROW );
	// printf( COM2, "%s", buff );
	Putstr( COM2, buff );
}

void train_control() {
	
	setupScreen();
	Create( 8, task_cli ); 
	Create( 12, draw_clock ); 
	
	// Putc( COM2, '~' );
	// Putc( COM2, '\n' );
	// Putstr( COM2, "Hello" );
	//setupScreen();
	//Create( 8, task_cli ); 
	
	// Delay(1000);
	//Create( 7, task_cli );
	// Delay(10000);
	//char buf[1000];
	//char* ptr = buf;

	//ptr += sprintf( ptr, "\033[2J\033[;H" );
	//ptr += sprintf( ptr, "\033[%d;7H%-81s\033[%d;7H\0", 3, "blah", 3 );

	//Putstr( COM2, buf ); 
	

	// Delay( 500 );
	Exit();
}
